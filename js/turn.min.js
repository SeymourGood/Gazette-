/* turn.js 4.1.0 | (c) 2012 Emmanuel Garcia | turnjs.com | Released under the MIT license */
(function($){'use strict';var has3d,hasRot,hasTrn,hasTrans=typeof document.createElement('div').style.transform!=='undefined';function getPrefix(){var styles=window.getComputedStyle(document.documentElement,''),pre=(Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/)||''===styles.OLink&&['','o'])[1];var dom={webkit:'Webkit',moz:'Moz',o:'O',ms:'ms'};return dom[pre]}var vendor=getPrefix();has3d=('WebKitCSSMatrix' in window&&'m11' in new WebKitCSSMatrix());hasRot=hasTrans&&(function(){var el=document.createElement('div');el.style[vendor+'Transform']='rotateY(1deg)';return el.style[vendor+'Transform']!==''})();hasTrn=hasTrans&&(function(){var el=document.createElement('div');el.style[vendor+'Transform']='translateX(1px)';return el.style[vendor+'Transform']!==''})();$.extend($.fn,{turn:function(options){if(this.data('turn'))return this;this.data('turn',true);var container=this,pageClass='turn-page',pageWidth=this.width()/2,pageHeight=this.height(),pages=[];this.css({position:'relative',transformStyle:'preserve-3d'});function build(){for(var i=0;i<container.children().length;i++){var p=$(container.children()[i]);p.addClass(pageClass).css({width:pageWidth,height:pageHeight,position:'absolute',top:0,left:i%2===0?0:pageWidth,zIndex:i});pages.push(p)}}function makeTurn(){container.on('click','.'+pageClass,function(e){var index=pages.indexOf($(this));if(index%2===0){flipTo(index+1)}else{flipTo(index-1)}})}function flipTo(index){for(var i=0;i<pages.length;i++){pages[i].css({zIndex:pages.length-i,transform:'',transformOrigin:''})}if(index>=0&&index<pages.length){pages[index].css({zIndex:pages.length+1});if(has3d&&hasRot){pages[index].css({transform:'rotateY(-180deg)',transformOrigin:'left center'})}}}build();makeTurn();return this}})})(jQuery);
